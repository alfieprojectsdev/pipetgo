# PipetGo Delegation Quick Reference

**For:** Handing off implementation plans to Web Claude
**Status:** Phase 5 Complete (227 tests passing) - Ready for Phase 6+ or Deployment

---

## âœ… Current State

- **Tests:** 233/233 passing (mock DB), 227/227 (integration)
- **Performance:** <8s test execution
- **Quality:** Zero P0 issues, WCAG 2.1 AA compliant
- **Deployment:** Ready (needs database indexes + Vercel config)

---

## ðŸŽ¯ Two Paths Forward

### Path A: Ship MVP Now (Recommended)
**Time:** 1-2 days | **Value:** Real user feedback

```bash
# 1. Commit deployment guide
git add VERCEL_DEPLOYMENT_GUIDE.md
git commit -m "docs: add Vercel deployment guide"

# 2. Create DB indexes (SQL in docs/DEPLOYMENT_CHECKLIST.md)
psql $DATABASE_URL < deployment-indexes.sql

# 3. Deploy to Vercel
# ... (follow VERCEL_DEPLOYMENT_GUIDE.md)
```

**Then:** Monitor for 1-2 weeks, iterate based on feedback

---

### Path B: Continue Stage 2 Development
**Phase 6:** Real Authentication (2-3 weeks)
**Phase 7:** Real File Upload (1-2 weeks)
**Phase 8:** Email Notifications (1-2 weeks)
**Phase 9:** Payment Integration (2-3 weeks)

**For each phase:**
1. Generate implementation plan with CLI Claude
2. Delegate to Web Claude with this command:

---

## ðŸ“‹ Delegation Command Template

When you have an implementation plan ready from CLI Claude:

```bash
cd /home/ltpt420/repos/pipetgo

# Start Web Claude instance
# (via browser at claude.com/code)

# Give Web Claude this context:
"I have an implementation plan for Phase [X]: [Feature Name].

Please read:
1. /home/ltpt420/repos/claude-config/coordination/handoffs/pipetgo-implementation-delegation.md
2. The implementation plan in [path/to/plan.md]

Then execute the plan following TDD workflow, using TodoWrite to track progress.

Critical:
- Run tests before and after: npm run test:run:mock
- Check for user_id vulnerability: rg 'req\.body\.user_id'
- Update docs/IMPLEMENTATION_STATUS.md when complete

Estimated time: [X weeks]"
```

---

## ðŸš¨ Critical Security Checks (Run Before Every Commit)

```bash
# P0 Vulnerability Check
rg "req\.body\.user_id"      # MUST return nothing
rg "req\.body\.driver_id"    # Resource hijacking
rg "\`SELECT.*\$\{" --type ts  # SQL injection

# Quality Gates
npm run test:run:mock    # 233/233 passing
npm run lint             # Zero errors
npm run type-check       # Zero errors
npm run build            # Build succeeds
```

---

## ðŸ“ Key Files for Web Claude

**Must Read:**
- `CLAUDE.md` - Project guide
- `docs/MVP_BUILD_ROADMAP.md` - 8-week roadmap
- `docs/DEPLOYMENT_CHECKLIST.md` - Pre-deploy checklist
- `/home/ltpt420/repos/claude-config/coordination/CROSS_PROJECT_LESSONS_LEARNED.md` - Security patterns

**Testing:**
- `tests/lib/db-mock.test.ts` - Mock DB (233 tests)
- `tests/e2e/quote-workflow.test.ts` - E2E (10 tests)

**Architecture:**
- `src/lib/db.ts` - Dual-mode database
- `src/lib/auth.ts` - NextAuth config
- `prisma/schema.prisma` - Database schema

---

## ðŸŽ¯ Phase Summaries (Generated by CLI Claude)

When you create implementation plans with CLI Claude, save them as:

```
docs/PHASE_6_AUTH_IMPLEMENTATION_PLAN.md       # Detailed plan
docs/PHASE_6_AUTH_SUMMARY.md                   # After completion
```

**Template for summary:**
```markdown
# Phase 6: Real Authentication - Summary

**Completed:** YYYY-MM-DD
**Time Taken:** X days/weeks
**Tests Added:** X tests (total: XXX)

## What Was Built
- [Feature 1]
- [Feature 2]

## Files Modified
- `path/to/file.ts` (X lines added)

## Tests Passing
- XXX/XXX passing

## Security Audit
- [x] No req.body.user_id vulnerabilities
- [x] Session regeneration implemented
- [x] Rate limiting on auth endpoints

## Next Steps
Proceed to Phase 7 or deploy to production.
```

---

## ðŸ”§ Common Commands for Web Claude

```bash
# Start dev server
npm run dev

# Run tests (mock DB - fast)
npm run test:run:mock

# Run tests (live DB - integration)
npm run test:run:live

# Quality checks
npm run lint && npm run type-check && npm run build

# Database operations
npx prisma migrate dev
npx prisma generate
npx prisma studio  # GUI for DB

# Check for issues
rg "TODO|FIXME" --type ts
rg "console\.(log|error)" src/
```

---

## ðŸ“ž When to Escalate to Root Claude

**Escalate if:**
- Discovered P0 security vulnerability
- Need new agent/command for pattern
- Blocking issue affecting priorities
- Cross-project pattern discovered

**How:**
```bash
# Add to shared alerts
echo "### $(date +%Y-%m-%d\ %H:%M): [Issue]
**Priority:** URGENT
**Project:** pipetgo
**Impact:** [description]
**Action Required:** [action]
" >> /home/ltpt420/repos/claude-config/coordination/shared-alerts.md
```

---

## âœ… Quality Gates (Required Before Merge)

Every phase must pass:

1. âœ… All tests passing (mock + live)
2. âœ… Zero linting errors
3. âœ… Zero TypeScript errors
4. âœ… Build succeeds
5. âœ… No P0 security vulnerabilities
6. âœ… Documentation updated
7. âœ… Commit messages follow conventions
8. âœ… Phase summary created

---

## ðŸŽ¯ Next Action (When Ready)

1. **Choose path:** Deploy MVP (A) or Continue Dev (B)
2. **If Path A:** Follow VERCEL_DEPLOYMENT_GUIDE.md
3. **If Path B:**
   - Use CLI Claude to generate Phase 6 implementation plan
   - Save plan to `docs/PHASE_6_AUTH_IMPLEMENTATION_PLAN.md`
   - Delegate to Web Claude using template above
   - Web Claude executes, commits to `claude/phase-6-auth-<session-id>` branch
   - You review and merge

---

**Full details:** See `pipetgo-implementation-delegation.md` (3,500+ lines)

**Ready to delegate!** ðŸš€
